{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/BMenez/Documents/site/testsfy/src/app/api/useDefitPrice/useDefitPrice.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport function useDefitPrice() {\r\n  const [price, setPrice] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchPrice() {\r\n      try {\r\n        const res = await fetch(\r\n          \"https://api.coingecko.com/api/v3/simple/token_price/polygon-pos?contract_addresses=0x428360b02c1269bc1c79fbc399ad31d58c1e8fda&vs_currencies=usd\",\r\n          {\r\n            headers: {\r\n              \"x-cg-demo-api-key\": process.env.NEXT_PUBLIC_COINGECKO_API_KEY,\r\n            },\r\n          }\r\n        );\r\n        const data = await res.json();\r\n        const tokenData = data[\"0x428360b02c1269bc1c79fbc399ad31d58c1e8fda\"];\r\n        if (tokenData?.usd) {\r\n          setPrice(Number(tokenData.usd));\r\n        } else {\r\n          setError(\"Prix introuvable\");\r\n        }\r\n      } catch {\r\n        setError(\"Erreur de chargement\");\r\n      }\r\n    }\r\n\r\n    fetchPrice();\r\n  }, []);\r\n\r\n  return { price, error };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAChB,mJACA;oBACE,SAAS;wBACP,mBAAmB;oBACrB;gBACF;gBAEF,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,MAAM,YAAY,IAAI,CAAC,6CAA6C;gBACpE,IAAI,WAAW,KAAK;oBAClB,SAAS,OAAO,UAAU,GAAG;gBAC/B,OAAO;oBACL,SAAS;gBACX;YACF,EAAE,OAAM;gBACN,SAAS;YACX;QACF;QAEA;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAO;IAAM;AACxB"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/BMenez/Documents/site/testsfy/src/app/activities/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDefitPrice } from \"../api/useDefitPrice/useDefitPrice\";\r\n\r\nexport default function Home() {\r\n  const [rows, setRows] = useState([]);\r\n  const [isClient, setIsClient] = useState(false);\r\n  const { price: defitPrice, error } = useDefitPrice();\r\n  const [selected, setSelected] = useState(\"0\");\r\n\r\n  useEffect(() => {\r\n    setIsClient(true);\r\n    loadActivities(0); // load all activities at start\r\n  }, []);\r\n\r\n  const loadActivities = async (userId) => {\r\n    try {\r\n      const res = await fetch(`/api/get-users-activities?userId=${userId}`);\r\n      const data = await res.json();\r\n      setRows(data.result);\r\n    } catch (err) {\r\n      console.error(\"❌ Failed to load activities:\", err);\r\n    }\r\n  };\r\n\r\n  const handleSelect = (e) => {\r\n    const id = e.target.value;\r\n    setSelected(id);\r\n    loadActivities(id); // call API when selection changes\r\n  };\r\n\r\n  return (\r\n    <main className=\"flex flex-col justify-start w-full max-w-screen-xl mx-auto px-6 md:px-16 pt-6 pb-6 md:pt-0 md:pb-0 min-h-[calc(100vh-96px)] md:min-h-auto overflow-y-auto\">\r\n\r\n      <div className=\"mb-4 self-start\">\r\n        <select\r\n          value={selected}\r\n          onChange={handleSelect}\r\n          className=\"bg-white/10 text-white px-3 py-2 rounded-lg border border-white/20 focus:outline-none focus:ring-2 focus:ring-white/30 md:px-4 md:py-2 md:text-base\"\r\n        >\r\n          <option value=\"0\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Tous</option>\r\n          <option value=\"1\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Usopp</option>\r\n          <option value=\"3\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Nico Robin</option>\r\n          <option value=\"2\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">DTeach</option>\r\n          <option value=\"4\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Jinbe</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"bg-[#5C42A6] rounded-2xl shadow-lg p-6 mb-6 w-full overflow-x-auto\">\r\n        <table className=\"w-full table-auto text-left border-collapse\">\r\n          <thead>\r\n            <tr className=\"text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <th className=\"py-3 px-4\">Date</th>\r\n              <th className=\"py-3 px-4\">Athlete</th>\r\n              <th className=\"py-3 px-4\">Activité</th>\r\n              <th className=\"py-3 px-4\">Gain brut (Defit)</th>\r\n              <th className=\"py-3 px-4\">Gain net Defit ($)</th>\r\n              <th className=\"py-3 px-4\">Boost ($)</th>\r\n              <th className=\"py-3 px-4\">Total ($)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-200\">\r\n            {rows.map((row, idx) => {\r\n              const rowClass = `hover:bg-white/10 transition-colors ${idx % 2 === 0 ? \"bg-[#5C42A6]/80\" : \"bg-[#5C42A6]/80\"} border-b border-white/20`;\r\n              return (\r\n                <tr key={row.id} className={rowClass}>\r\n                  <td className=\"text-white py-3 px-4\">\r\n                    {isClient ? new Date(row.date_claimed).toLocaleDateString(\"fr-FR\") : row.date_claimed}\r\n                  </td>\r\n                  <td className=\"text-white py-3 px-4\">{row.user_name}</td>\r\n                  <td className=\"text-white py-3 px-4\">{row.activity_name}</td>\r\n                  <td className=\"text-white py-3 px-4\">{row.defit_amount}</td>\r\n                  <td className=\"text-white py-3 px-4\">{(row.defit_amount * row.participation_percentage * defitPrice / 100).toFixed(2)}</td>\r\n                  <td className=\"text-white py-3 px-4\">{Number(row.boost).toFixed(2)}</td>\r\n                  <td className=\"text-white py-3 px-4\">{(Number(row.boost)+(row.defit_amount * row.participation_percentage * defitPrice / 100)).toFixed(2)}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}