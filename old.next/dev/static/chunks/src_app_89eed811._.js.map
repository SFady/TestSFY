{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/BMenez/Documents/Site/testsfy/src/app/api/useDefitPrice/useDefitPrice.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport function useDefitPrice() {\r\n  const [price, setPrice] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchPrice() {\r\n      try {\r\n        const res = await fetch(\r\n          \"https://api.coingecko.com/api/v3/simple/token_price/polygon-pos?contract_addresses=0x428360b02c1269bc1c79fbc399ad31d58c1e8fda&vs_currencies=usd\",\r\n          {\r\n            headers: {\r\n              \"x-cg-demo-api-key\": process.env.NEXT_PUBLIC_COINGECKO_API_KEY,\r\n            },\r\n          }\r\n        );\r\n        const data = await res.json();\r\n        const tokenData = data[\"0x428360b02c1269bc1c79fbc399ad31d58c1e8fda\"];\r\n        if (tokenData?.usd) {\r\n          setPrice(Number(tokenData.usd));\r\n        } else {\r\n          setError(\"Prix introuvable\");\r\n        }\r\n      } catch {\r\n        setError(\"Erreur de chargement\");\r\n      }\r\n    }\r\n\r\n    fetchPrice();\r\n  }, []);\r\n\r\n  return { price, error };\r\n}\r\n"],"names":["useEffect","useState","useDefitPrice","price","setPrice","error","setError","fetchPrice","res","fetch","headers","process","env","NEXT_PUBLIC_COINGECKO_API_KEY","data","json","tokenData","usd","Number"],"mappings":";;;;AAamCW,OAAO,CAACC,GAAG,CAACC;AAb/C,SAASb,SAAS,EAAEC,QAAQ,QAAQ,OAAO;;;AAEpC;;IACL,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,OAAGH,yKAAQ,EAAC,IAAI,CAAC;IACxC,MAAM,CAACI,KAAK,EAAEC,QAAQ,CAAC,OAAGL,yKAAQ,EAAC,IAAI,CAAC;IAExCD,8KAAS;mCAAC,MAAM;YACd,eAAeO,UAAUA,CAAA,EAAG;gBAC1B,IAAI;oBACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CACrB,iJAAiJ,EACjJ;wBACEC,OAAO,EAAE;4BACP,mBAAmB;wBACrB;oBACF,CACF,CAAC;oBACD,MAAMI,IAAI,GAAG,MAAMN,GAAG,CAACO,IAAI,CAAC,CAAC;oBAC7B,MAAMC,SAAS,GAAGF,IAAI,CAAC,4CAA4C,CAAC;oBACpE,IAAIE,SAAS,EAAEC,GAAG,EAAE;wBAClBb,QAAQ,CAACc,MAAM,CAACF,SAAS,CAACC,GAAG,CAAC,CAAC;oBACjC,CAAC,MAAM;wBACLX,QAAQ,CAAC,kBAAkB,CAAC;oBAC9B;gBACF,CAAC,CAAC,OAAM;oBACNA,QAAQ,CAAC,sBAAsB,CAAC;gBAClC;YACF;YAEAC,UAAU,CAAC,CAAC;QACd,CAAC;kCAAE,EAAE,CAAC;IAEN,OAAO;QAAEJ,KAAK;QAAEE;IAAM,CAAC;AACzB;GA/BgBH,aAAaA,CAAA,EAAG","ignoreList":[]}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["C:/Users/BMenez/Documents/Site/testsfy/src/app/statistics/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useDefitPrice } from \"../api/useDefitPrice/useDefitPrice\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function Home() {\r\n  const { price: defitPrice } = useDefitPrice();\r\n  const [totals, setTotals] = useState([]);\r\n  const [totals2, setTotals2] = useState([]);\r\n  const [selected, setSelected] = useState(1);\r\n  const [selected2, setSelected2] = useState(1);\r\n\r\n  const fetchTotals = async (period) => {\r\n    try {\r\n      const res = await fetch(`/api/get-user-totals?id=${period}`);\r\n      const data = await res.json();\r\n      setTotals(data || []);\r\n    } catch (error) {\r\n      console.error(\"Erreur fetchTotals:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchTotals2 = async (period) => {\r\n    try {\r\n      const res = await fetch(`/api/get-user-totals?id=${period}`);\r\n      const data = await res.json();\r\n      setTotals2(data || []);\r\n    } catch (error) {\r\n      console.error(\"Erreur fetchTotals2:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTotals(selected);\r\n    fetchTotals2(selected2);\r\n  }, [selected, selected2]);\r\n\r\n  return (\r\n    <main className=\"flex flex-col w-full max-w-screen-xl mx-auto px-4 md:px-8 pt-4 pb-4\">\r\n\r\n      {/* WRAPPER COMMUN → même largeur */}\r\n      <div className=\"max-w-[800px] w-full mx-auto\">\r\n\r\n        {/* TABLEAU PRIX DEFIT */}\r\n        <table className=\"w-full table-auto text-center border-collapse bg-[#5C42A6] shadow-lg p-4\">\r\n          <thead>\r\n            <tr className=\"text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <th className=\"py-2 px-3\">Cours du Defit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-200\">\r\n            <tr>\r\n              <td className=\"py-2 px-3\">\r\n                {defitPrice?.toFixed(4) ?? \"...\"} $\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <br />\r\n        <br />\r\n\r\n        {/* BOUTONS TABLEAU 1 */}\r\n        <div className=\"flex justify-start gap-2 mb-2\">\r\n          {[1, 2, 3].map((id) => (\r\n            <button\r\n              key={id}\r\n              onClick={() => setSelected(id)}\r\n              className={`px-3 py-1 text-sm rounded transition\r\n                ${selected === id\r\n                  ? \"bg-[#D6C48A] text-[#2A2550]\"\r\n                  : \"bg-[#6B5FA7] text-white hover:bg-[#7569B3]\"}\r\n              `}\r\n            >\r\n              {id === 1 ? \"Année\" : id === 2 ? \"Mois\" : \"Semaine\"}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* TABLEAU DEFITS */}\r\n        <table className=\"w-full table-auto text-left border-collapse bg-[#5C42A6] shadow-lg p-4\">\r\n          <thead>\r\n            <tr className=\"text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <th className=\"py-2 px-3\">Athlete</th>\r\n              <th className=\"py-2 px-3 text-right\">Defits ($)</th>\r\n              <th className=\"py-2 px-3 text-right\">Boost ($)</th>\r\n              <th className=\"py-2 px-3 text-right\">Total ($)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-200\">\r\n            {totals.length > 0 ? (\r\n              totals.map((row, idx) => {\r\n                const defit = Number(defitPrice * (row.defit_amount ?? 0));\r\n                const boost = Number(row.boost ?? 0);\r\n                const total = defit + boost;\r\n\r\n                return (\r\n                  <tr key={idx}>\r\n                    <td className=\"py-1 px-3\">{row.name}</td>\r\n                    <td className=\"py-1 px-3 text-right\">\r\n                      {defit.toLocaleString(\"en-US\", {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                      }).replace(\",\", \" \")}\r\n                    </td>\r\n                    <td className=\"py-1 px-3 text-right\">\r\n                      {boost.toLocaleString(\"en-US\", {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                      }).replace(\",\", \" \")}\r\n                    </td>\r\n                    <td className=\"py-1 px-3 text-right\">\r\n                      {total.toLocaleString(\"en-US\", {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                      }).replace(\",\", \" \")}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={4} className=\"py-2 text-gray-400\">\r\n                  Chargement...\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        <br />\r\n        <br />\r\n\r\n        {/* BOUTONS TABLEAU 2 */}\r\n        <div className=\"flex justify-start gap-2 mb-2\">\r\n          {[1, 2, 3].map((id) => (\r\n            <button\r\n              key={id}\r\n              onClick={() => setSelected2(id)}\r\n              className={`px-3 py-1 text-sm rounded transition\r\n                ${selected2 === id\r\n                  ? \"bg-[#D6C48A] text-[#2A2550]\"\r\n                  : \"bg-[#6B5FA7] text-white hover:bg-[#7569B3]\"}\r\n              `}\r\n            >\r\n              {id === 1 ? \"Année\" : id === 2 ? \"Mois\" : \"Semaine\"}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* TABLEAU KILOMÈTRES */}\r\n        <table className=\"w-full table-auto text-left border-collapse bg-[#5C42A6] shadow-lg p-4\">\r\n          <thead>\r\n            <tr className=\"text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <th className=\"py-2 px-3\">Athlete</th>\r\n              <th className=\"py-2 px-3 text-right\">Kilomètres</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-200\">\r\n            {totals2.length > 0 ? (\r\n              totals2.map((row, idx) => (\r\n                <tr key={idx}>\r\n                  <td className=\"py-1 px-3\">{row.name}</td>\r\n                  <td className=\"py-1 px-3 text-right\">\r\n                    {Number(row.kilometers ?? 0)\r\n                      .toLocaleString(\"en-US\", {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                      })\r\n                      .replace(\",\", \" \")}\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={2} className=\"py-2 text-gray-400\">\r\n                  Chargement...\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["useDefitPrice","useEffect","useState","Home","price","defitPrice","totals","setTotals","totals2","setTotals2","selected","setSelected","selected2","setSelected2","fetchTotals","period","res","fetch","data","json","error","console","fetchTotals2","toFixed","map","id","length","row","idx","defit","Number","defit_amount","boost","total","name","toLocaleString","minimumFractionDigits","maximumFractionDigits","replace","kilometers"],"mappings":";;;;;AAEA,SAASA,aAAa,QAAQ,oCAAoC;AAClE,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;;;AAH3C,YAAY;;;AAKG;;IACb,MAAM,EAAEE,KAAK,EAAEC,UAAAA,EAAY;IAC3B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,OAAGL,yKAAQ,EAAC,EAAE,CAAC;IACxC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,OAAGP,yKAAQ,EAAC,EAAE,CAAC;IAC1C,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,OAAGT,yKAAQ,EAAC,CAAC,CAAC;IAC3C,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,OAAGX,yKAAQ,EAAC,CAAC,CAAC;IAE7C,MAAMY,WAAW,GAAG,OAAOC,MAAM,IAAK;QACpC,IAAI;YACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,CAAA,wBAAA,EAA2BF,MAAM,EAAE,CAAC;YAC5D,MAAMG,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;YAC7BZ,SAAS,CAACW,IAAI,IAAI,EAAE,CAAC;QACvB,CAAC,CAAC,OAAOE,KAAK,EAAE;YACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC7C;IACF,CAAC;IAED,MAAME,YAAY,GAAG,OAAOP,QAAM,IAAK;QACrC,IAAI;YACF,MAAMC,KAAG,GAAG,MAAMC,KAAK,CAAC,CAAA,wBAAA,EAA2BF,QAAM,EAAE,CAAC;YAC5D,MAAMG,MAAI,GAAG,MAAMF,KAAG,CAACG,IAAI,CAAC,CAAC;YAC7BV,UAAU,CAACS,MAAI,IAAI,EAAE,CAAC;QACxB,CAAC,CAAC,OAAOE,OAAK,EAAE;YACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,OAAK,CAAC;QAC9C;IACF,CAAC;QAEDnB,0KAAS;0BAAC,MAAM;YACda,WAAW,CAACJ,QAAQ,CAAC;YACrBY,YAAY,CAACV,SAAS,CAAC;QACzB,CAAC;yBAAE;QAACF,QAAQ;QAAEE,SAAS;KAAC,CAAC;IAEzB,qBACE,6LAAC,IAAI;QAAC,SAAS,EAAC,qEAAqE,CAAC;gCAGpF,6LAAC,GAAG;YAAC,SAAS,EAAC,8BAA8B,CAAC;;8BAG5C,6LAAC,KAAK;oBAAC,SAAS,EAAC,0EAA0E,CAAC;;sCAC1F,6LAAC,KAAK,CAAC;oDACL,6LAAC,EAAE;gCAAC,SAAS,EAAC,qEAAqE,CAAC;wDAClF,6LAAC,EAAE;oCAAC,SAAS,EAAC,WAAW;8CAAC,cAAc,EAAE,EAAE,CAAC;;;;;;;;;;;;;;;;sCAGjD,6LAAC,KAAK;4BAAC,SAAS,EAAC,eAAe,CAAC;oDAC/B,6LAAC,EAAE,CAAC;wDACF,6LAAC,EAAE;oCAAC,SAAS,EAAC,WAAW,CAAC;;wCACvBP,UAAU,EAAEkB,OAAO,CAAC,CAAC,CAAC,IAAI,KAAK;wCAAC;;;;;;;;;;;;;;;;;;;;;;;8BAMzC,6LAAC,EAAE,GAAG;;;;;8BACN,6LAAC,EAAE,GAAG;;;;;8BAGN,6LAAC,GAAG;oBAAC,SAAS,EAAC,+BAA+B,CAAC;8BAC5C;wBAAC,CAAC;wBAAE,CAAC;wBAAE,CAAC;qBAAC,CAACC,GAAG,EAAEC,EAAE,iBAChB,6LAAC,MAAM,CACL,GAAG,CAAC;4BACJ,OAAO,CAAC,CAAC,IAAMd,WAAW,CAACc,EAAE,CAAC,CAAC;4BAC/B,SAAS,CAAC,CAAC,CAAA;gBACzB,EAAkBf,QAAQ,KAAKe,EAAE,GACb,6BAA6B,GAC7B,4CAA4C,CAAA;cAChE,CAAe,CAAC,CACH;sCACEA,EAAE,KAAK,CAAC,GAAG,OAAO,GAAGA,EAAE,KAAK,CAAC,GAAG,MAAM,GAAG,SAAS,CAAC;2BAR/CA,EAAE,CAAC;;;;;;;;;;8BAcd,6LAAC,KAAK;oBAAC,SAAS,EAAC,wEAAwE,CAAC;;sCACxF,6LAAC,KAAK,CAAC;oDACL,6LAAC,EAAE;gCAAC,SAAS,EAAC,qEAAqE,CAAC;;kDAClF,6LAAC,EAAE;wCAAC,SAAS,EAAC,WAAW;kDAAC,OAAO,EAAE,EAAE,CAAC;;;;;;kDACtC,6LAAC,EAAE;wCAAC,SAAS,EAAC,sBAAsB;kDAAC,UAAU,EAAE,EAAE,CAAC;;;;;;kDACpD,6LAAC,EAAE;wCAAC,SAAS,EAAC,sBAAsB;kDAAC,SAAS,EAAE,EAAE,CAAC;;;;;;kDACnD,6LAAC,EAAE;wCAAC,SAAS,EAAC,sBAAsB;kDAAC,SAAS,EAAE,EAAE,CAAC;;;;;;;;;;;;;;;;;sCAGvD,6LAAC,KAAK;4BAAC,SAAS,EAAC,eAAe,CAAC;sCAC9BnB,MAAM,CAACoB,MAAM,GAAG,CAAC,GAChBpB,MAAM,CAACkB,GAAG,CAAC,CAACG,GAAG,EAAEC,GAAG,KAAK;gCACvB,MAAMC,KAAK,GAAGC,MAAM,CAACzB,UAAU,GAAA,CAAIsB,GAAG,CAACI,YAAY,IAAI,CAAC,CAAC,CAAC;gCAC1D,MAAMC,KAAK,GAAGF,MAAM,CAACH,GAAG,CAACK,KAAK,IAAI,CAAC,CAAC;gCACpC,MAAMC,KAAK,GAAGJ,KAAK,GAAGG,KAAK;gCAE3B,qBACE,6LAAC,EAAE,CAAC,GAAG,CAAC;;sDACN,6LAAC,EAAE;4CAAC,SAAS,EAAC,WAAW,CAAC;sDAACL,GAAG,CAACO,IAAI,CAAC,EAAE,EAAE,CAAC;;;;;;sDACzC,6LAAC,EAAE;4CAAC,SAAS,EAAC,sBAAsB,CAAC;sDAClCL,KAAK,CAACM,cAAc,CAAC,OAAO,EAAE;gDAC7BC,qBAAqB,EAAE,CAAC;gDACxBC,qBAAqB,EAAE;4CACzB,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;;;;;;sDAEvB,6LAAC,EAAE;4CAAC,SAAS,EAAC,sBAAsB,CAAC;sDAClCN,KAAK,CAACG,cAAc,CAAC,OAAO,EAAE;gDAC7BC,qBAAqB,EAAE,CAAC;gDACxBC,qBAAqB,EAAE;4CACzB,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;;;;;;sDAEvB,6LAAC,EAAE;4CAAC,SAAS,EAAC,sBAAsB,CAAC;sDAClCL,KAAK,CAACE,cAAc,CAAC,OAAO,EAAE;gDAC7BC,qBAAqB,EAAE,CAAC;gDACxBC,qBAAqB,EAAE;4CACzB,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;;;;;;;mCAlBhBV,GAAG,CAAC,CAAC;;;;;4BAsBlB,CAAC,CAAC,iBAEF,6LAAC,EAAE,CAAC;wDACF,6LAAC,EAAE;oCAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oCAAC,SAAS,EAAC,oBAAoB;8CAAC;;;;;;;;;;;;;;;;;;;;;;8BAQvD,6LAAC,EAAE,GAAG;;;;;8BACN,6LAAC,EAAE,GAAG;;;;;8BAGN,6LAAC,GAAG;oBAAC,SAAS,EAAC,+BAA+B,CAAC;8BAC5C;wBAAC,CAAC;wBAAE,CAAC;wBAAE,CAAC;qBAAC,CAACJ,GAAG,EAAEC,IAAE,iBAChB,6LAAC,MAAM,CACL,GAAG,CAAC;4BACJ,OAAO,CAAC,CAAC,IAAMZ,YAAY,CAACY,IAAE,CAAC,CAAC;4BAChC,SAAS,CAAC,CAAC,CAAA;gBACzB,EAAkBb,SAAS,KAAKa,IAAE,GACd,6BAA6B,GAC7B,4CAA4C,CAAA;cAChE,CAAe,CAAC,CACH;sCACEA,IAAE,KAAK,CAAC,GAAG,OAAO,GAAGA,IAAE,KAAK,CAAC,GAAG,MAAM,GAAG,SAAS,CAAC;2BAR/CA,IAAE,CAAC;;;;;;;;;;8BAcd,6LAAC,KAAK;oBAAC,SAAS,EAAC,wEAAwE,CAAC;;sCACxF,6LAAC,KAAK,CAAC;oDACL,6LAAC,EAAE;gCAAC,SAAS,EAAC,qEAAqE,CAAC;;kDAClF,6LAAC,EAAE;wCAAC,SAAS,EAAC,WAAW;kDAAC,OAAO,EAAE,EAAE,CAAC;;;;;;kDACtC,6LAAC,EAAE;wCAAC,SAAS,EAAC,sBAAsB;kDAAC,UAAU,EAAE,EAAE,CAAC;;;;;;;;;;;;;;;;;sCAGxD,6LAAC,KAAK;4BAAC,SAAS,EAAC,eAAe,CAAC;sCAC9BjB,OAAO,CAACkB,MAAM,GAAG,CAAC,GACjBlB,OAAO,CAACgB,GAAG,CAAC,CAACG,KAAG,EAAEC,KAAG,iBACnB,6LAAC,EAAE,CAAC,GAAG,CAAC;;sDACN,6LAAC,EAAE;4CAAC,SAAS,EAAC,WAAW,CAAC;sDAACD,KAAG,CAACO,IAAI,CAAC,EAAE,EAAE,CAAC;;;;;;sDACzC,6LAAC,EAAE;4CAAC,SAAS,EAAC,sBAAsB,CAAC;sDAClCJ,MAAM,CAACH,KAAG,CAACY,UAAU,IAAI,CAAC,CAAC,CACzBJ,cAAc,CAAC,OAAO,EAAE;gDACvBC,qBAAqB,EAAE,CAAC;gDACxBC,qBAAqB,EAAE;4CACzB,CAAC,CAAC,CACDC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;;;;;;;mCARhBV,KAAG,CAAC,CAAC;;;;0DAahB,6LAAC,EAAE,CAAC;wDACF,6LAAC,EAAE;oCAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oCAAC,SAAS,EAAC,oBAAoB;8CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAW/D;;;QApLgC5B,uKAAa,CAAC,CAAC;;;KADvBG,IAAIA,CAAA,EAAG","ignoreList":[]}}]
}