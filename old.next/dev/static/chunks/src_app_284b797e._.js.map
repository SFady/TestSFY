{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["c:/Users/BMenez/Documents/site/testsfy/src/app/api/useDefitPrice/useDefitPrice.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport function useDefitPrice() {\r\n  const [price, setPrice] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchPrice() {\r\n      try {\r\n        const res = await fetch(\r\n          \"https://api.coingecko.com/api/v3/simple/token_price/polygon-pos?contract_addresses=0x428360b02c1269bc1c79fbc399ad31d58c1e8fda&vs_currencies=usd\",\r\n          {\r\n            headers: {\r\n              \"x-cg-demo-api-key\": process.env.NEXT_PUBLIC_COINGECKO_API_KEY,\r\n            },\r\n          }\r\n        );\r\n        const data = await res.json();\r\n        const tokenData = data[\"0x428360b02c1269bc1c79fbc399ad31d58c1e8fda\"];\r\n        if (tokenData?.usd) {\r\n          setPrice(Number(tokenData.usd));\r\n        } else {\r\n          setError(\"Prix introuvable\");\r\n        }\r\n      } catch {\r\n        setError(\"Erreur de chargement\");\r\n      }\r\n    }\r\n\r\n    fetchPrice();\r\n  }, []);\r\n\r\n  return { price, error };\r\n}\r\n"],"names":["useEffect","useState","useDefitPrice","price","setPrice","error","setError","fetchPrice","res","fetch","headers","process","env","NEXT_PUBLIC_COINGECKO_API_KEY","data","json","tokenData","usd","Number"],"mappings":";;;;AAamCW,OAAO,CAACC,GAAG,CAACC;AAb/C,SAASb,SAAS,EAAEC,QAAQ,QAAQ,OAAO;;;AAEpC;;IACL,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,OAAGH,yKAAQ,EAAC,IAAI,CAAC;IACxC,MAAM,CAACI,KAAK,EAAEC,QAAQ,CAAC,OAAGL,yKAAQ,EAAC,IAAI,CAAC;IAExCD,8KAAS;mCAAC,MAAM;YACd,eAAeO,UAAUA,CAAA,EAAG;gBAC1B,IAAI;oBACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CACrB,iJAAiJ,EACjJ;wBACEC,OAAO,EAAE;4BACP,mBAAmB;wBACrB;oBACF,CACF,CAAC;oBACD,MAAMI,IAAI,GAAG,MAAMN,GAAG,CAACO,IAAI,CAAC,CAAC;oBAC7B,MAAMC,SAAS,GAAGF,IAAI,CAAC,4CAA4C,CAAC;oBACpE,IAAIE,SAAS,EAAEC,GAAG,EAAE;wBAClBb,QAAQ,CAACc,MAAM,CAACF,SAAS,CAACC,GAAG,CAAC,CAAC;oBACjC,CAAC,MAAM;wBACLX,QAAQ,CAAC,kBAAkB,CAAC;oBAC9B;gBACF,CAAC,CAAC,OAAM;oBACNA,QAAQ,CAAC,sBAAsB,CAAC;gBAClC;YACF;YAEAC,UAAU,CAAC,CAAC;QACd,CAAC;kCAAE,EAAE,CAAC;IAEN,OAAO;QAAEJ,KAAK;QAAEE;IAAM,CAAC;AACzB;GA/BgBH,aAAaA,CAAA,EAAG","ignoreList":[]}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["c:/Users/BMenez/Documents/site/testsfy/src/app/activities/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDefitPrice } from \"../api/useDefitPrice/useDefitPrice\";\r\n\r\nexport default function Home() {\r\n  const [rows, setRows] = useState([]);\r\n  const [isClient, setIsClient] = useState(false);\r\n  const { price: defitPrice, error } = useDefitPrice();\r\n  const [selected, setSelected] = useState(\"0\");\r\n\r\n  useEffect(() => {\r\n    setIsClient(true);\r\n    loadActivities(0); // load all activities at start\r\n  }, []);\r\n\r\n  const loadActivities = async (userId) => {\r\n    try {\r\n      const res = await fetch(`/api/get-users-activities?userId=${userId}`);\r\n      const data = await res.json();\r\n      setRows(data.result);\r\n    } catch (err) {\r\n      console.error(\"❌ Failed to load activities:\", err);\r\n    }\r\n  };\r\n\r\n  const handleSelect = (e) => {\r\n    const id = e.target.value;\r\n    setSelected(id);\r\n    loadActivities(id); // call API when selection changes\r\n  };\r\n\r\n  return (\r\n    <main className=\"flex flex-col justify-start w-full max-w-screen-xl mx-auto px-6 md:px-16 pt-6 pb-6 md:pt-0 md:pb-0 min-h-[calc(100vh-96px)] md:min-h-auto overflow-y-auto\">\r\n\r\n      <div className=\"mb-4 self-start\">\r\n        <select\r\n          value={selected}\r\n          onChange={handleSelect}\r\n          className=\"bg-white/10 text-white px-3 py-2 rounded-lg border border-white/20 focus:outline-none focus:ring-2 focus:ring-white/30 md:px-4 md:py-2 md:text-base\"\r\n        >\r\n          <option value=\"0\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Tous</option>\r\n          <option value=\"1\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Usopp</option>\r\n          <option value=\"3\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Nico Robin</option>\r\n          <option value=\"2\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">DTeach</option>\r\n          <option value=\"4\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Jinbe</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"bg-[#5C42A6] rounded-2xl shadow-lg p-6 mb-6 w-full overflow-x-auto\">\r\n        <table className=\"w-full table-auto text-left border-collapse\">\r\n          <thead>\r\n            <tr className=\"text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <th className=\"py-3 px-4\">Date</th>\r\n              <th className=\"py-3 px-4\">Athlete</th>\r\n              <th className=\"py-3 px-4\">Activité</th>\r\n              <th className=\"py-3 px-4\">Gain brut (Defit)</th>\r\n              <th className=\"py-3 px-4\">Gain net Defit ($)</th>\r\n              <th className=\"py-3 px-4\">Boost ($)</th>\r\n              <th className=\"py-3 px-4\">Total ($)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-200\">\r\n            {rows.map((row, idx) => {\r\n              const rowClass = `hover:bg-white/10 transition-colors ${idx % 2 === 0 ? \"bg-[#5C42A6]/80\" : \"bg-[#5C42A6]/80\"} border-b border-white/20`;\r\n              return (\r\n                <tr key={row.id} className={rowClass}>\r\n                  <td className=\"text-white py-3 px-4\">\r\n                    {isClient ? new Date(row.date_claimed).toLocaleDateString(\"fr-FR\") : row.date_claimed}\r\n                  </td>\r\n                  <td className=\"text-white py-3 px-4\">{row.user_name}</td>\r\n                  <td className=\"text-white py-3 px-4\">{row.activity_name}</td>\r\n                  <td className=\"text-white py-3 px-4\">{row.defit_amount}</td>\r\n                  <td className=\"text-white py-3 px-4\">{(row.defit_amount * row.participation_percentage * defitPrice / 100).toFixed(2)}</td>\r\n                  <td className=\"text-white py-3 px-4\">{Number(row.boost).toFixed(2)}</td>\r\n                  <td className=\"text-white py-3 px-4\">{(Number(row.boost)+(row.defit_amount * row.participation_percentage * defitPrice / 100)).toFixed(2)}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["useEffect","useState","useDefitPrice","Home","rows","setRows","isClient","setIsClient","price","defitPrice","error","selected","setSelected","loadActivities","userId","res","fetch","data","json","result","err","console","handleSelect","e","id","target","value","map","row","idx","rowClass","Date","date_claimed","toLocaleDateString","user_name","activity_name","defit_amount","participation_percentage","toFixed","Number","boost"],"mappings":"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","ignoreList":[]}}]
}