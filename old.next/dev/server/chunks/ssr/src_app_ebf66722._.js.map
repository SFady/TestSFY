{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/BMenez/Documents/Site/testsfy/src/app/api/useDefitPrice/useDefitPrice.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport function useDefitPrice() {\r\n  const [price, setPrice] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchPrice() {\r\n      try {\r\n        const res = await fetch(\r\n          \"https://api.coingecko.com/api/v3/simple/token_price/polygon-pos?contract_addresses=0x428360b02c1269bc1c79fbc399ad31d58c1e8fda&vs_currencies=usd\",\r\n          {\r\n            headers: {\r\n              \"x-cg-demo-api-key\": process.env.NEXT_PUBLIC_COINGECKO_API_KEY,\r\n            },\r\n          }\r\n        );\r\n        const data = await res.json();\r\n        const tokenData = data[\"0x428360b02c1269bc1c79fbc399ad31d58c1e8fda\"];\r\n        if (tokenData?.usd) {\r\n          setPrice(Number(tokenData.usd));\r\n        } else {\r\n          setError(\"Prix introuvable\");\r\n        }\r\n      } catch {\r\n        setError(\"Erreur de chargement\");\r\n      }\r\n    }\r\n\r\n    fetchPrice();\r\n  }, []);\r\n\r\n  return { price, error };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAChB,mJACA;oBACE,SAAS;wBACP,mBAAmB;oBACrB;gBACF;gBAEF,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,MAAM,YAAY,IAAI,CAAC,6CAA6C;gBACpE,IAAI,WAAW,KAAK;oBAClB,SAAS,OAAO,UAAU,GAAG;gBAC/B,OAAO;oBACL,SAAS;gBACX;YACF,EAAE,OAAM;gBACN,SAAS;YACX;QACF;QAEA;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAO;IAAM;AACxB"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/BMenez/Documents/Site/testsfy/src/app/home/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDefitPrice } from \"../api/useDefitPrice/useDefitPrice\";\r\n\r\nexport default function Home() {\r\n\r\n  const [defitAmount, setDefitAmount] = useState(0);\r\n  const [dollarAmount, setDollarAmount] = useState(0);\r\n  const [user_liquidity, setUserLiquidity] = useState(0);\r\n\r\n  const [selected, setSelected] = useState(\"1\");\r\n\r\n  const { price: defitPrice, error } = useDefitPrice();\r\n\r\n  const fetchDefitAmount = async (athleteId) => {\r\n    try {\r\n      const res = await fetch(`/api/get-user-defit-amount?id=${athleteId}`);\r\n      const data = await res.json();\r\n      setDefitAmount(Number(data.defits) ?? 0);\r\n      setDollarAmount(Number(data.dollars) ?? 0);\r\n      setUserLiquidity(Number(data.user_liquidity) ?? 0);\r\n    } catch (error) {\r\n      console.error(\"Erreur fetch DEFIT:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(\"selectedAthlete\");\r\n    const finalId = stored || \"1\";\r\n    setSelected(finalId);\r\n    if (!stored) localStorage.setItem(\"selectedAthlete\", finalId);\r\n\r\n    fetchDefitAmount(finalId);\r\n  }, []);\r\n\r\n  const handleSelect = (e) => {\r\n    const id = e.target.value;\r\n    setSelected(id);\r\n    localStorage.setItem(\"selectedAthlete\", id);\r\n    fetchDefitAmount(id);\r\n  };\r\n\r\n  return (\r\n    <main className=\"relative w-full max-w-screen-xl mx-auto px-6 md:px-16 pt-6 pb-6 md:pt-0 md:pb-0 min-h-[calc(100vh-96px)] overflow-y-auto md:overflow-visible\">\r\n\r\n      {/* Sélecteur d’athlète centré au-dessus de l’image */}\r\n      <div className=\"flex justify-center mb-4 mt-2 md:mt-10\">\r\n        <select\r\n          value={selected}\r\n          onChange={handleSelect}\r\n          className=\"bg-white/10 text-white px-3 py-2 rounded-lg border border-white/20 \r\n               focus:outline-none focus:ring-2 focus:ring-white/30\r\n               md:px-4 md:py-2 md:text-base\"\r\n        >\r\n          <option value=\"1\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Usopp</option>\r\n          <option value=\"3\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Nico Robin</option>\r\n          <option value=\"2\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">DTeach</option>\r\n          <option value=\"4\" className=\"bg-[#8d6bf2] text-[#f3f0ff]\">Jinbe</option>\r\n        </select>\r\n      </div>\r\n\r\n\r\n      <div className=\"flex justify-center items-start gap-2 mb-4\">\r\n\r\n        {/* IMAGE À GAUCHE avec position relative */}\r\n        {/* <div className=\"rounded-2xl inline-block relative\">\r\n          <Image\r\n            src=\"/images/runner_init2.png\"\r\n            alt=\"Athlete\"\r\n            width={200}\r\n            height={400}\r\n            loading=\"eager\"\r\n          /> */}\r\n\r\n        {/* TRAIT partant du milieu horizontal de la tête */}\r\n        {/* <div\r\n            className=\"absolute bg-gray-600 h-px\"\r\n            style={{\r\n              top: \"20px\",       // milieu de la tête\r\n              left: \"50%\",       // milieu horizontal de l'image\r\n              width: \"80px\"      // longueur du trait vers le texte\r\n            }}\r\n          /> */}\r\n        {/* </div> */}\r\n        <div className=\"rounded-2xl inline-block relative -ml-10\">\r\n          <Image\r\n            src={selected === \"1\" ? \"/images/runner_init3.png\" : \"/images/runner_init2.png\"}\r\n            alt=\"Athlete\"\r\n            width={200}\r\n            height={400}\r\n            loading=\"eager\"\r\n          />\r\n        </div>\r\n\r\n        {/* TEXTE À DROITE, encore plus proche du trait */}\r\n        <div className=\"-ml-8 flex flex-col justify-start\" style={{ marginTop: \"50px\" }}>\r\n          <table className=\"border-collapse text-center text-xs\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"px-2 py-1\">Element</th>\r\n                <th className=\"px-2 py-1\">Classe</th>\r\n                <th className=\"px-2 py-1\">Niveau</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td className=\"px-2 py-1\">T-Shirt</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"A\" : \"_\"}</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"0\" : \"_\"}</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"px-2 py-1\">Short</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"A\" : \"_\"}</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"0\" : \"_\"}</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"px-2 py-1\">Chaussettes</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"A\" : \"_\"}</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"0\" : \"_\"}</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"px-2 py-1\">Chaussures</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"A\" : \"_\"}</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"0\" : \"_\"}</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"px-2 py-1\">Montre</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"A\" : \"_\"}</td>\r\n                <td className=\"px-2 py-1\">{selected === \"1\" ? \"0\" : \"_\"}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          {/* <h3 className=\"text-sm leading-snug\">Chaussures : Classe A / Niveau 0</h3> */}\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* Tableau des stats */}\r\n      <div className=\"bg-white/10 backdrop-blur-md rounded-2xl shadow-lg p-6 mb-6 w-full max-w-sm mx-auto\">\r\n        <table className=\"w-full text-base\">\r\n          <tbody>\r\n            <tr className=\"border-b border-white/20\">\r\n              <td className=\"py-3 px-2\">DEFIT</td>\r\n              <td className=\"py-3 px-2 text-right font-semibold\">\r\n                {Number(defitAmount * defitPrice)?.toLocaleString(\"en-US\", {\r\n                  minimumFractionDigits: 2,\r\n                  maximumFractionDigits: 2,\r\n                }) + \" $\" ?? \"...\"}\r\n              </td>\r\n            </tr>\r\n            <tr className=\"border-b border-white/20\">\r\n              <td className=\"py-3 px-2\">Améliorations</td>\r\n              <td className=\"py-3 px-2 text-right font-semibold\">\r\n                {Number(user_liquidity)?.toLocaleString(\"en-US\", {\r\n                  minimumFractionDigits: 2,\r\n                  maximumFractionDigits: 2,\r\n                }).replace(\",\", \" \") + \" $\" ?? \"...\"}\r\n              </td>\r\n            </tr>\r\n            <tr className=\"border-b border-white/20\">\r\n              <td className=\"py-3 px-2\">Disponible</td>\r\n              <td className=\"py-3 px-2 text-right font-semibold\">\r\n                {Number(dollarAmount)?.toLocaleString(\"en-US\", {\r\n                  minimumFractionDigits: 2,\r\n                  maximumFractionDigits: 2,\r\n                }).replace(\",\", \" \") + \" $\" ?? \"...\"}\r\n              </td>\r\n            </tr>\r\n            <tr className=\"border-t-4 border-transparent text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <td className=\"py-2 px-2 font-bold\">TOTAL Gains</td>\r\n              <td className=\"py-2 px-2 text-right font-semibold\">\r\n                {Number((defitAmount * defitPrice) + dollarAmount)?.toLocaleString(\"en-US\", {\r\n                  minimumFractionDigits: 2,\r\n                  maximumFractionDigits: 2,\r\n                }).replace(\",\", \" \") + \" $\" ?? \"...\"}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}