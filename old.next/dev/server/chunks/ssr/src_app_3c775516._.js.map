{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BMenez/Documents/Site/testsfy/src/app/api/useDefitPrice/useDefitPrice.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport function useDefitPrice() {\r\n  const [price, setPrice] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchPrice() {\r\n      try {\r\n        const res = await fetch(\r\n          \"https://api.coingecko.com/api/v3/simple/token_price/polygon-pos?contract_addresses=0x428360b02c1269bc1c79fbc399ad31d58c1e8fda&vs_currencies=usd\",\r\n          {\r\n            headers: {\r\n              \"x-cg-demo-api-key\": process.env.NEXT_PUBLIC_COINGECKO_API_KEY,\r\n            },\r\n          }\r\n        );\r\n        const data = await res.json();\r\n        const tokenData = data[\"0x428360b02c1269bc1c79fbc399ad31d58c1e8fda\"];\r\n        if (tokenData?.usd) {\r\n          setPrice(Number(tokenData.usd));\r\n        } else {\r\n          setError(\"Prix introuvable\");\r\n        }\r\n      } catch {\r\n        setError(\"Erreur de chargement\");\r\n      }\r\n    }\r\n\r\n    fetchPrice();\r\n  }, []);\r\n\r\n  return { price, error };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAChB,mJACA;oBACE,SAAS;wBACP,mBAAmB;oBACrB;gBACF;gBAEF,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,MAAM,YAAY,IAAI,CAAC,6CAA6C;gBACpE,IAAI,WAAW,KAAK;oBAClB,SAAS,OAAO,UAAU,GAAG;gBAC/B,OAAO;oBACL,SAAS;gBACX;YACF,EAAE,OAAM;gBACN,SAAS;YACX;QACF;QAEA;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAO;IAAM;AACxB"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BMenez/Documents/Site/testsfy/src/app/statistics/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useDefitPrice } from \"../api/useDefitPrice/useDefitPrice\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function Home() {\r\n  const { price: defitPrice } = useDefitPrice();\r\n  const [totals, setTotals] = useState([]);\r\n  const [totals2, setTotals2] = useState([]);\r\n  const [selected, setSelected] = useState(1);\r\n  const [selected2, setSelected2] = useState(1);\r\n\r\n  const fetchTotals = async (period) => {\r\n    try {\r\n      const res = await fetch(`/api/get-user-totals?id=${period}`);\r\n      const data = await res.json();\r\n      setTotals(data || []);\r\n    } catch (error) {\r\n      console.error(\"Erreur fetchTotals:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchTotals2 = async (period) => {\r\n    try {\r\n      const res = await fetch(`/api/get-user-totals?id=${period}`);\r\n      const data = await res.json();\r\n      setTotals2(data || []);\r\n    } catch (error) {\r\n      console.error(\"Erreur fetchTotals2:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTotals(selected);\r\n    fetchTotals2(selected2);\r\n  }, [selected, selected2]);\r\n\r\n  return (\r\n    <main className=\"flex flex-col w-full max-w-screen-xl mx-auto px-4 md:px-8 pt-4 pb-4\">\r\n\r\n      {/* WRAPPER COMMUN → même largeur */}\r\n      <div className=\"max-w-[800px] w-full mx-auto\">\r\n\r\n        {/* TABLEAU PRIX DEFIT */}\r\n        <table className=\"w-full table-auto text-center border-collapse bg-[#5C42A6] shadow-lg p-4\">\r\n          <thead>\r\n            <tr className=\"text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <th className=\"py-2 px-3\">Cours du Defit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-200\">\r\n            <tr>\r\n              <td className=\"py-2 px-3\">\r\n                {defitPrice?.toFixed(4) ?? \"...\"} $\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <br />\r\n        <br />\r\n\r\n        {/* BOUTONS TABLEAU 1 */}\r\n        <div className=\"flex justify-start gap-2 mb-2\">\r\n          {[1, 2, 3].map((id) => (\r\n            <button\r\n              key={id}\r\n              onClick={() => setSelected(id)}\r\n              className={`px-3 py-1 text-sm rounded transition\r\n                ${selected === id\r\n                  ? \"bg-[#D6C48A] text-[#2A2550]\"\r\n                  : \"bg-[#6B5FA7] text-white hover:bg-[#7569B3]\"}\r\n              `}\r\n            >\r\n              {id === 1 ? \"Année\" : id === 2 ? \"Mois\" : \"Semaine\"}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* TABLEAU DEFITS */}\r\n        <table className=\"w-full table-auto text-left border-collapse bg-[#5C42A6] shadow-lg p-4\">\r\n          <thead>\r\n            <tr className=\"text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <th className=\"py-2 px-3\">Athlete</th>\r\n              <th className=\"py-2 px-3 text-right\">Defits ($)</th>\r\n              <th className=\"py-2 px-3 text-right\">Boost ($)</th>\r\n              <th className=\"py-2 px-3 text-right\">Total ($)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-200\">\r\n            {totals.length > 0 ? (\r\n              totals.map((row, idx) => {\r\n                const defit = Number(defitPrice * (row.defit_amount ?? 0));\r\n                const boost = Number(row.boost ?? 0);\r\n                const total = defit + boost;\r\n\r\n                return (\r\n                  <tr key={idx}>\r\n                    <td className=\"py-1 px-3\">{row.name}</td>\r\n                    <td className=\"py-1 px-3 text-right\">\r\n                      {defit.toLocaleString(\"en-US\", {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                      }).replace(\",\", \" \")}\r\n                    </td>\r\n                    <td className=\"py-1 px-3 text-right\">\r\n                      {boost.toLocaleString(\"en-US\", {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                      }).replace(\",\", \" \")}\r\n                    </td>\r\n                    <td className=\"py-1 px-3 text-right\">\r\n                      {total.toLocaleString(\"en-US\", {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                      }).replace(\",\", \" \")}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={4} className=\"py-2 text-gray-400\">\r\n                  Chargement...\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        <br />\r\n        <br />\r\n\r\n        {/* BOUTONS TABLEAU 2 */}\r\n        <div className=\"flex justify-start gap-2 mb-2\">\r\n          {[1, 2, 3].map((id) => (\r\n            <button\r\n              key={id}\r\n              onClick={() => setSelected2(id)}\r\n              className={`px-3 py-1 text-sm rounded transition\r\n                ${selected2 === id\r\n                  ? \"bg-[#D6C48A] text-[#2A2550]\"\r\n                  : \"bg-[#6B5FA7] text-white hover:bg-[#7569B3]\"}\r\n              `}\r\n            >\r\n              {id === 1 ? \"Année\" : id === 2 ? \"Mois\" : \"Semaine\"}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* TABLEAU KILOMÈTRES */}\r\n        <table className=\"w-full table-auto text-left border-collapse bg-[#5C42A6] shadow-lg p-4\">\r\n          <thead>\r\n            <tr className=\"text-white bg-gradient-to-r from-purple-500 via-pink-500 to-red-500\">\r\n              <th className=\"py-2 px-3\">Athlete</th>\r\n              <th className=\"py-2 px-3 text-right\">Kilomètres</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-200\">\r\n            {totals2.length > 0 ? (\r\n              totals2.map((row, idx) => (\r\n                <tr key={idx}>\r\n                  <td className=\"py-1 px-3\">{row.name}</td>\r\n                  <td className=\"py-1 px-3 text-right\">\r\n                    {Number(row.kilometers ?? 0)\r\n                      .toLocaleString(\"en-US\", {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                      })\r\n                      .replace(\",\", \" \")}\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={2} className=\"py-2 text-gray-400\">\r\n                  Chargement...\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}